You are a senior full-stack engineer.
There is a critical permission issue in my system regarding Trainer role access.

âŒ Current Problem

Trainers can see orders or take order-related actions.
This must never happen.

âœ” Correct Expected Behavior

Trainers should ONLY be allowed to buy/shop products like members.
They must NOT have access to:

Viewing all orders

Viewing order details

Order management screens

Order actions (approve, cancel, update, modify, etc.)

Admin/Member order history

Any order-related analytics or reports

They MUST NOT see anything related to Admin or Member orders.

ğŸ“Œ 1. FRONTEND FIX â€“ Remove Trainer Access to Orders
Your Tasks:

Hide ALL order-related pages, routes, buttons, icons, menus for trainers:

Order List

Order Details

Order Dashboard

Order Actions

Fix Redirect Logic

If a trainer tries to manually open any order URL:

Redirect them to the Product Shop Page
OR
Show: â€œYou do not have permission to view orders.â€

UI Cleanup

Remove â€œOrdersâ€ tab from the Trainer Dashboard sidebar.

Remove any UI component that conditionally renders orders for Trainers.

Ensure the Trainer Dashboard shows ONLY:

Buy Products

Personal Profile

Notifications

Strict TypeScript Role Checking

Add role === "trainer" checks in all dashboard components.

Prevent accidental rendering by using strict TS interfaces:

interface User {
  id: string;
  email: string;
  role: "super_admin" | "admin" | "member" | "trainer";
}

ğŸ“Œ 2. BACKEND FIX â€“ Block Trainer Access to Order APIs
Your Tasks:

Apply strict backend validation:

if (user.role === "trainer") {
  return res.status(403).json({
    error: "Trainers are not allowed to access order data."
  });
}


Secure all order endpoints:

/orders

/orders/:id

/orders/create

/orders/update

/orders/delete

Any filtered order routes

Remove any legacy or duplicate endpoint where trainer logic might still be handled.

Ensure trainers ONLY access:

Product list API

Product details API

Product purchase API

Ensure the backend never returns order lists or history for trainer role.

ğŸ“Œ 3. DATABASE & ROLE-BASED SECURITY FIX
Your Tasks:

Validate role-based access in database queries:

Trainers should never query the orders table.

Ensure RLS (Row Level Security) or permission checks enforce:

role !== 'trainer' for order queries

Check for wrong joins or views that might include order data for trainers.

Verify role mapping from Supabase/Auth is consistent and correct.

ğŸ“Œ 4. COMPLETE ZERO-ERROR REQUIREMENT

The entire Trainer â†’ Orders module must have NO errors:

Frontend:

No double rendering

No broken dashboards

No wrong conditional rendering

No console warnings

Backend:

No unauthorized trainer access

No missing role checks

No accidental order leakage

Database:

Correct role mapping

Correct RLS rules (if applied)

ğŸ“Œ 5. Deliverables Required

You must provide:

âœ” Updated frontend code

TrainerDashboard.tsx

Sidebar/Menu

ProtectedRoute logic

Shop/Product components

Any TS interfaces

âœ” Updated backend code

Order route handlers

Role validation middleware

Secure order API logic

âœ” Updated DB/RLS logic

Role checks

Permission rules

Any SQL updates

âœ” Short explanation

What caused trainers to see orders

How the fix ensures proper role isolation

ğŸ¯ FINAL GOAL

A fully secure, error-free system where:

Trainers cannot see or manage orders

Trainers can ONLY buy products like members

No order-related UI or backend path is available to them

Frontend, backend, and database all strictly enforce role isolation